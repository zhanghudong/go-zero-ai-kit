# Logic 业务模式库（严格版）

## 模式1：查询 + 返回
- 步骤1：查询数据
- 步骤2：判断不存在/非法状态
- 步骤3：拼装响应
- 注意：分页默认值来自 .api；`pageSize` 只做上限裁剪

## 模式2：状态迁移
- 步骤1：查询当前状态
- 步骤2：校验状态可迁移
- 步骤3：更新状态（注明原因）
- 步骤4：记录审计/日志

## 模式3：创建/写入
- 步骤1：检查幂等（如有业务唯一键）
- 步骤2：写入主表
- 步骤3：写入关联表/日志
- 步骤4：返回主键

## 模式4：外部调用
- 步骤1：组装请求
- 步骤2：调用外部服务
- 步骤3：处理异常/超时
- 步骤4：落库或返回

## 模式5：更新（按字段选择性更新）
- 步骤1：查询当前状态
- 步骤2：对非空字段构建更新内容
- 步骤3：执行更新
- 步骤4：返回结果

## 模式6：列表分页查询
- 步骤1：构建 `RowBuilder` 与 `CountBuilder("*")`
- 步骤2：按条件追加 where（字段统一加反引号）
- 步骤3：先查总数，再查分页数据
