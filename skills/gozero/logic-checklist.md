# Logic 实现检查清单

严格按照以下清单检查，每条都应明确满足。

1. 结构
- 保持 goctl scaffold 函数签名与结构不变
- 使用 `logx.WithContext(ctx)` 初始化 Logger
- 使用分步注释组织流程（例如 `// ========== 步骤1：... ==========`）

2. 输入与校验
- **不做 `req == nil` 判断**（goctl 生成调用不会传入 nil）
- **不重复做 .api 已声明的必填校验**
- 仅在更新类接口中做“字段是否为空”的更新判断（决定是否更新该字段）

3. 业务流程
- 入口先做必要前置检查，再进入核心流程
- 核心流程拆成清晰步骤
- 状态迁移必须写明原因

4. 数据访问
- 查询/写入必须处理错误
- 记录不存在需明确报错
- 多步骤写入应考虑事务边界（如需事务，明确说明）

5. 日志
- 失败场景使用 `Errorw`
- 关键步骤使用 `Infow`
- 日志字段必须包含业务主键

6. 返回
- 不吞错误
- 返回结构体必须完整赋值
